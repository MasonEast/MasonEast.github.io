{"version":3,"file":"static/js/3658.ffce18ef.chunk.js","mappings":"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","sources":["constants.ts","page/bgs/index.tsx","utils/index.ts","assets/bgs|lazy|/^/.//bg.*/.jpeg$/|groupOptions: {}|namespace object"],"sourcesContent":["export const BGIMG = \"bgImg\";\n\nexport const tplFileNumber = 13; // tpl图片数量\n\nexport const bgFileNumber = 16; // bg图片数量\n\nexport const CLASSIFYS = {\n  industry: {\n    title: \"行业\",\n    options: [\n      {\n        label: \"全部\",\n        value: 0,\n      },\n      {\n        label: \"应届生\",\n        value: 1,\n      },\n      {\n        label: \"互联网\",\n        value: 2,\n      },\n      {\n        label: \"金融\",\n        value: 3,\n      },\n      {\n        label: \"公职单位\",\n        value: 4,\n      },\n      {\n        label: \"工商管理\",\n        value: 5,\n      },\n      {\n        label: \"土木工程\",\n        value: 6,\n      },\n    ],\n  },\n  style: {\n    title: \"风格\",\n    options: [\n      {\n        label: \"全部\",\n        value: 0,\n      },\n      {\n        label: \"极简\",\n        value: 1,\n      },\n      {\n        label: \"炫酷\",\n        value: 2,\n      },\n      {\n        label: \"证件照\",\n        value: 3,\n      },\n    ],\n  },\n};\n","import { useNavigate } from \"react-router-dom\";\n\nimport { bgFileNumber, BGIMG } from \"@/constants\";\nimport { getUrlBase64 } from \"@/utils\";\n\nimport Header from \"../header\";\nimport useImgsLoaded from \"@/hooks/useImgsLoaded\";\nimport { Spin } from \"antd\";\nimport KeepAlive from \"react-activation\";\n\nconst bgArr: string[] = [];\n\nnew Array(bgFileNumber).fill(1).forEach(async (item, i) => {\n  const img = await import(`@/assets/bgs/bg${i + 1}.jpeg`);\n  bgArr.push(img.default);\n});\n\nexport default function Bgs() {\n  const navigate = useNavigate();\n  const { loading } = useImgsLoaded({ delay: 100 });\n\n  const handleClick = async (item: string) => {\n    const bgImg = await getUrlBase64(item);\n    navigate(`/editor`, {\n      state: { [BGIMG]: bgImg },\n    });\n  };\n\n  return (\n    <KeepAlive cacheKey=\"cache_bgs\">\n      <Header />\n      <Spin spinning={loading}>\n        <div className=\"bg-gray-100 flex justify-between flex-wrap\">\n          {bgArr.map((item, i) => (\n            <div\n              key={i}\n              className=\"w-72 h-96 inline-block m-8 relative border-solid border-2 border-gray-300\"\n            >\n              <div className=\"w-full h-full absolute bg-gray-500 opacity-0 hover:opacity-80\">\n                <div\n                  className=\"m-auto mt-40 w-32  h-10 bg-yellow-500 text-center text-white leading-10 text-2xl font-medium rounded-md cursor-pointer\"\n                  onClick={() => handleClick(item)}\n                >\n                  使用此背景\n                </div>\n              </div>\n              <img className=\"w-full h-full\" src={item} alt=\"\" />\n            </div>\n          ))}\n          <i className=\"w-72  m-8\"></i>\n          <i className=\"w-72  m-8\"></i>\n          <i className=\"w-72  m-8\"></i>\n          <i className=\"w-72  m-8\"></i>\n          <i className=\"w-72  m-8\"></i>\n        </div>\n      </Spin>\n    </KeepAlive>\n  );\n}\n","import { message } from \"antd\";\nimport { JSONData } from \"../page/editor\";\n\n/**\n *url2base64\n * @param url 图片路径\n * @param ext 图片格式\n */\nexport function getUrlBase64(\n  url: string,\n  ext: string = \"jpeg\"\n): Promise<string> {\n  return new Promise((resolve, reject) => {\n    const canvas = document.createElement(\"canvas\");\n    const ctx = canvas.getContext(\"2d\") as CanvasRenderingContext2D;\n    const img = new Image();\n    img.src = url;\n\n    img.onload = function () {\n      canvas.height = img.height;\n      canvas.width = img.width;\n      ctx.drawImage(img, 0, 0, img.width, img.height);\n      const dataURL = canvas.toDataURL(\"image/\" + ext);\n      resolve(dataURL);\n      canvas.remove();\n    };\n\n    img.onerror = () => reject(\"加载失败\");\n  });\n}\n\n/**\n *深拷贝\n * @param url 图片路径\n * @param ext 图片格式\n */\nexport function deepCopy(obj: any) {\n  let result: any;\n  if (typeof obj === \"object\") {\n    result = obj.constructor === Array ? [] : {};\n    for (let i in obj) {\n      result[i] = typeof obj[i] === \"object\" ? deepCopy(obj[i]) : obj[i];\n    }\n  } else {\n    result = obj;\n  }\n  return result;\n}\n\n/**\n *给json加reactelement的symbol\n */\n\nexport function json2jsx(data: JSX.Element) {\n  const { type, props, key } = data;\n  const res: React.ReactElement<any, any> = {\n    type,\n    props,\n    key,\n  };\n  if (props?.children) {\n    if (Array.isArray(props.children)) {\n      props.children.forEach((item: any) => {\n        if (typeof item !== \"string\" && !item[\"$$typeof\"]) {\n          item[\"$$typeof\"] = Symbol.for(\"react.element\");\n          json2jsx(item);\n        }\n      });\n    } else {\n      if (typeof props.children !== \"string\" && !props.children[\"$$typeof\"]) {\n        props.children[\"$$typeof\"] = Symbol.for(\"react.element\");\n        json2jsx(props.children);\n      }\n    }\n  }\n  return res;\n}\n\n/**\n *16进制颜色转rgba\n * @param colorStr 16进制颜色\n * @param opacity 透明度\n */\nexport function colorRgb(colorStr: string, opacity?: number) {\n  //十六进制颜色值的正则表达式\n  let reg = /^#([0-9a-fA-f]{3}|[0-9a-fA-f]{6})$/;\n  let sColor = colorStr.toLowerCase();\n  if (sColor && reg.test(sColor)) {\n    if (sColor.length === 4) {\n      let sColorNew = \"#\";\n      for (let i = 1; i < 4; i += 1) {\n        sColorNew += sColor.slice(i, i + 1).concat(sColor.slice(i, i + 1));\n      }\n      sColor = sColorNew;\n    }\n    //处理六位的颜色值f\n    const colorArr = [];\n    for (let i = 1; i < 7; i += 2) {\n      colorArr.push(parseInt(\"0x\" + sColor.slice(i, i + 2)));\n    }\n    if (opacity !== 0 && !opacity) {\n      opacity = 1;\n    }\n    colorArr.push(opacity);\n    return \"rgba(\" + colorArr.join(\",\") + \")\";\n  } else {\n    return sColor;\n  }\n}\n\n/**\n *解决JSON.stringify死循环的问题\n */\nexport const getCircularReplacer = () => {\n  return (key: string, value: any) => {\n    const arr = [\"elementType\", \"$$typeof\", \"Provider\", \"_owner\"];\n    if (arr.includes(key)) {\n      return;\n    }\n    return value;\n  };\n};\n\ninterface ExportParams {\n  name: string;\n  data: JSONData;\n}\nexport const handleExportJSON = ({ name, data }: ExportParams) => {\n  const elementA = document.createElement(\"a\");\n\n  elementA.download = name;\n  elementA.style.display = \"none\";\n\n  const blob = new Blob([JSON.stringify(data, getCircularReplacer())]);\n\n  elementA.href = URL.createObjectURL(blob);\n  document.body.appendChild(elementA);\n  elementA.click();\n  document.body.removeChild(elementA);\n};\n\ntype ImportParams = (p: JSONData) => void;\n\nexport const handleImportJSON = (cb: ImportParams) => {\n  // 创建一个file input\n  let input: HTMLInputElement | null = document.createElement(\"input\");\n  input.type = \"file\";\n  input.accept = \".json\";\n  // 绑定onchange事件\n  input.onchange = (event: any) => {\n    let files = event.target.files;\n    if (!files || !files.length) {\n      input = null;\n      throw new Error(\"No files\");\n    }\n\n    // 当选择文件后，使用FileReader API读取文件，返回数据\n    let reader = new FileReader();\n    reader.onload = (event: any) => {\n      try {\n        let config = JSON.parse(event.target.result);\n        cb(config);\n        return config;\n      } catch (e: any) {\n        message.error(e);\n        throw new Error(e);\n      }\n    };\n    reader.readAsText(files[0]);\n  };\n\n  // 触发上传文件\n  input.click();\n};\n\n/**\n *等待所有图片加载完成\n */\nexport const waitImgsLoaded = async (root: Element) => {\n  const imgs =\n    root instanceof HTMLImageElement ? [root] : root.querySelectorAll(\"img\");\n\n  return await Promise.all(\n    Array.from(imgs).map(\n      (img) =>\n        new Promise((resolve) => {\n          if (img.complete) {\n            resolve(img);\n            return;\n          }\n          img.addEventListener(\"load\", () => resolve(img));\n        })\n    )\n  );\n};\n","var map = {\n\t\"./bg1.jpeg\": [\n\t\t5202,\n\t\t5202\n\t],\n\t\"./bg10.jpeg\": [\n\t\t7921,\n\t\t7921\n\t],\n\t\"./bg11.jpeg\": [\n\t\t2723,\n\t\t2723\n\t],\n\t\"./bg12.jpeg\": [\n\t\t534,\n\t\t534\n\t],\n\t\"./bg13.jpeg\": [\n\t\t7129,\n\t\t7129\n\t],\n\t\"./bg14.jpeg\": [\n\t\t1459,\n\t\t1459\n\t],\n\t\"./bg15.jpeg\": [\n\t\t6103,\n\t\t6103\n\t],\n\t\"./bg16.jpeg\": [\n\t\t1554,\n\t\t3695\n\t],\n\t\"./bg2.jpeg\": [\n\t\t8701,\n\t\t8701\n\t],\n\t\"./bg3.jpeg\": [\n\t\t2664,\n\t\t2664\n\t],\n\t\"./bg4.jpeg\": [\n\t\t514,\n\t\t514\n\t],\n\t\"./bg5.jpeg\": [\n\t\t6571,\n\t\t6571\n\t],\n\t\"./bg6.jpeg\": [\n\t\t9311,\n\t\t9488\n\t],\n\t\"./bg7.jpeg\": [\n\t\t2461,\n\t\t2461\n\t],\n\t\"./bg8.jpeg\": [\n\t\t8964,\n\t\t8964\n\t],\n\t\"./bg9.jpeg\": [\n\t\t4361,\n\t\t4361\n\t]\n};\nfunction webpackAsyncContext(req) {\n\tif(!__webpack_require__.o(map, req)) {\n\t\treturn Promise.resolve().then(function() {\n\t\t\tvar e = new Error(\"Cannot find module '\" + req + \"'\");\n\t\t\te.code = 'MODULE_NOT_FOUND';\n\t\t\tthrow e;\n\t\t});\n\t}\n\n\tvar ids = map[req], id = ids[0];\n\treturn __webpack_require__.e(ids[1]).then(function() {\n\t\treturn __webpack_require__.t(id, 1 | 16);\n\t});\n}\nwebpackAsyncContext.keys = function() { return Object.keys(map); };\nwebpackAsyncContext.id = 8912;\nmodule.exports = webpackAsyncContext;"],"names":["BGIMG","tplFileNumber","bgFileNumber","bgArr","Bgs","navigate","useNavigate","loading","useImgsLoaded","delay","handleClick","item","getUrlBase64","bgImg","state","cacheKey","spinning","className","map","i","onClick","src","alt","Array","fill","forEach","img","push","default","url","ext","Promise","resolve","reject","canvas","document","createElement","ctx","getContext","Image","onload","height","width","drawImage","dataURL","toDataURL","remove","onerror","json2jsx","data","type","props","res","key","children","isArray","Symbol","for","colorRgb","colorStr","opacity","sColor","toLowerCase","test","length","sColorNew","slice","concat","colorArr","parseInt","join","handleExportJSON","name","elementA","download","style","display","blob","Blob","JSON","stringify","value","includes","href","URL","createObjectURL","body","appendChild","click","removeChild","handleImportJSON","cb","input","accept","onchange","event","files","target","Error","reader","FileReader","config","parse","result","e","readAsText","webpackAsyncContext","req","__webpack_require__","o","then","code","ids","id","t","keys","Object","module","exports"],"sourceRoot":""}